var K=Object.defineProperty,G=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var T=(r,t,e)=>t in r?K(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,d=(r,t)=>{for(var e in t||(t={}))J.call(t,e)&&T(r,e,t[e]);if(I)for(var e of I(t))Q.call(t,e)&&T(r,e,t[e]);return r},u=(r,t)=>G(r,W(t));import{_ as l,c as x,a as S,b as V,R as L,j as s,d as c,P as h,r as p,e as X,u as w,f as R,g as Y,h as Z,i as ee,p as te,k as re,l as ne,t as se,m as oe,n as ae,o as ie,q as le}from"./vendor.382a42ba.js";const ce=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}};ce();const C="subtitles";function de(r,t){const e=document.createElement("a"),a=new Blob([t],{type:"text/plain"});e.href=URL.createObjectURL(a),e.download=r,document.body.appendChild(e),e.click()}function A(r){const t=r.split(`
\r
`);return l.reduce(t,(e,a)=>{const[n,o,i]=a.split(`
`);return n&&o&&i&&e.push({counter:n.trim(),time:o.trim(),subtitle:i.trim()}),e},[])}function ue(r){return l.reduce(r,(t,e)=>`${t}${e.counter}
${e.time}
${e.subtitle}
\r
`,"")}const D=r=>r[C],P=x([D],r=>r.metadata),F=x([D],r=>r.originalSubtitles),pe=x([D],r=>!l.isEmpty(r.originalSubtitles)),me=x([D],r=>r.updatedSubtitles),fe=S("ADD_ORIGINAL_SUBTITLES"),U=S("ADD_UPDATED_SUBTITLES"),k=S("UPLOAD_FILE"),O=S("RESET"),be=S("DOWNLOAD_SUCCESS");function he(){return(r,t)=>{const e=t(),a=F(e),n=me(e),o=l.size(n),{fileName:i}=P(e),m=[...n,...l.slice(a,o)],g=ue(m);return r(be({fileName:i,subtitles:g}))}}const $={metadata:{currentLine:0,totalLines:0,fileName:"",shortFileName:""},originalSubtitles:[],updatedSubtitles:[]},ge=V($,r=>{r.addCase(fe,(t,e)=>{const a=A(e.payload);return u(d({},t),{originalSubtitles:a,metadata:u(d({},t.metadata),{totalLines:l.size(a)})})}).addCase(U,(t,e)=>u(d({},t),{updatedSubtitles:[...t.updatedSubtitles,e.payload],metadata:u(d({},t.metadata),{currentLine:l.size([...t.updatedSubtitles,e.payload])})})).addCase(k,(t,e)=>{const{subtitle:a,name:n}=e.payload,o=A(a);return u(d({},t),{originalSubtitles:o,metadata:u(d({},t.metadata),{fileName:n,shortFileName:l.truncate(n,{length:50}),currentLine:0,totalLines:l.size(o)})})}).addCase(O,()=>$)});var Se="/translatia/assets/download.e3e1ef96.svg",_e="/translatia/assets/reset.5930241d.svg",ve="/translatia/assets/return.7091aeed.svg",Ne="/translatia/assets/tab.01825178.svg";function ye(){return s("div",{children:c("p",{className:"editor__helper-footer",children:[s("b",{children:"TAB"}),"\xA0",s("img",{alt:"tab",src:Ne}),"\xA0 for new line \u2002\u2002",s("b",{children:"RETURN"}),"\xA0",s("img",{alt:"return",src:ve}),"\xA0 for next line"]})})}var xe=L.memo(ye);function z({onPress:r,iconSrc:t,label:e}){const[a,n]=p.exports.useState(!1),o=()=>{n(!0)},i=()=>{n(!1)},m=X("editor__toolbar-button-text",{"editor__toolbar-button-text-hover":a});return s("div",{className:"editor__toolbar-container",children:c("div",{className:"editor__toolbar-button",role:"button",tabIndex:0,onClick:r,onKeyPress:r,onMouseEnter:o,onMouseLeave:i,children:[s("img",{alt:"Download",height:"20",src:t}),s("p",{className:m,children:e})]})})}z.propTypes={iconSrc:h.node.isRequired,label:h.string.isRequired,onPress:h.func.isRequired};var q=L.memo(z);function M({onDownloadPress:r,onResetPress:t}){return c("div",{className:"editor__toolbar-container",children:[s(q,{iconSrc:Se,label:"Download",onPress:r}),s(q,{iconSrc:_e,label:"Start over",onPress:t})]})}M.propTypes={onDownloadPress:h.func.isRequired,onResetPress:h.func.isRequired};var Le=L.memo(M);function De(){var N;const[r,t]=p.exports.useState(""),e=w(),a=R(F),{shortFileName:n,totalLines:o,currentLine:i}=R(P),m=(N=a[i])==null?void 0:N.subtitle,g=p.exports.useCallback(b=>t(b.target.value),[]),_=p.exports.useCallback(()=>e(O()),[e]),v=p.exports.useCallback(()=>{const{payload:{fileName:b,subtitles:y}}=e(he());return de(b,y)},[e]);function f(b){var E;const{key:y}=b;y==="Tab"&&(b.preventDefault(),t(B=>`${B}
`)),y==="Enter"&&(b.preventDefault(),e(U(u(d({},a[i]),{subtitle:l.isEmpty(r)?(E=a[i])==null?void 0:E.subtitle:r}))),t(""))}return o<=i?s("p",{style:{cursor:"pointer"},onClick:_,children:"End!"}):c("div",{className:"editor__main-container",children:[c("div",{children:[c("div",{className:"editor__title-row",children:[s("p",{className:"editor__title",children:n}),c("p",{className:"editor__lines",children:[i+1," / ",o," lines"]})]}),c("div",{className:"editor__container",children:[s("p",{className:"editor__current-line",children:m}),s("textarea",{id:"editor__current-input",name:"subtitleInput",placeholder:"Type translation here...",rows:"1",value:r,onChange:g,onKeyDown:f})]}),s(xe,{})]}),s(Le,{onDownloadPress:v,onResetPress:_})]})}function H({onFileUploaded:r}){const[t,e]=p.exports.useState(!1),[a,n]=p.exports.useState(null),o=p.exports.useCallback(_=>{e(!0),_.forEach(v=>{const f=new FileReader;f.onabort=l.noop(),f.onerror=()=>n("File reading has failed"),f.onload=()=>{const N=f.result;return e(!1),r(v.name,N)},f.readAsText(v)})},[r]),{getRootProps:i,getInputProps:m,isDragActive:g}=Y({onDrop:o});return t?s("div",{className:"file-uploader__container",children:s("p",{children:"loading..."})}):c("div",{className:"file-uploader__container",children:[s("h3",{children:"Upload your file"}),c("div",u(d({},i()),{className:"dropzone__container",children:[s("input",d({},m())),g?s("p",{className:"dropzone__paragraph",children:"Drop the files here ..."}):s("p",{className:"dropzone__paragraph",children:"Drop some files here, or click to select files."})]})),!!a&&s("p",{children:a})]})}H.propTypes={onFileUploaded:h.func.isRequired};function Re(){const r=w(),t=p.exports.useCallback((a,n)=>{r(k({name:a,subtitle:n}))},[r]),e=R(pe);return c("div",{children:[!e&&s(H,{onFileUploaded:t}),e&&s(De,{})]})}const Ee={key:"main",storage:ne};Z.exports.createLogger();const Ie=[se],Te=ee({[C]:ge}),we=te(Ee,Te),j=re({reducer:we,middleware:Ie}),Ce=oe(j);console.log("\u2728 hello traveler \u{1F387}");ae.render(s(L.StrictMode,{children:s(ie,{store:j,children:s(le,{persistor:Ce,children:s(Re,{})})})}),document.getElementById("root"));
